{
  "kind": "build_request",
  "title": "Fix customer booking trip calculator using round-trip minimum distance for one-way trips",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Fix the Trip Total Calculator so that when the user selects the one-way trip type and enters 130 km, the calculated amount is based on one-way pricing (and one-way minimum coverage if applicable) rather than round-trip minimum coverage (250 km).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "recent-messages-user-1"
        ],
        "quotes": [
          "Costmer link calculater one way trip 130km amount showing Round trip 250km amount"
        ]
      },
      "acceptanceCriteria": [
        "In TripTotalCalculator, selecting Trip Type = \"One-way drop\" and entering Distance = 130 km computes the total using one-way per-km rate and one-way driver allowance (not round-trip values).",
        "If the calculator applies a minimum billable distance, it uses MINIMUM_COVERAGE.oneWay for one-way trips and MINIMUM_COVERAGE.roundTrip for round trips, and never mixes them.",
        "Switching Trip Type between one-way and round trip updates the displayed rate/allowance/billable distance immediately and consistently.",
        "No backend changes are required; the fix is fully contained in the frontend calculator behavior."
      ]
    }
  ],
  "constraints": [
    "Use English for any user-facing text.",
    "Do not edit files under frontend/src/components/ui or any other paths listed as immutable in SYSTEM_CONTEXT."
  ],
  "nonGoals": [
    "Changing the published rate card values (per-km rates, allowances, or minimum coverage numbers) unless required to fix the one-way vs round-trip mismatch.",
    "Adding new authentication or link-sharing features (customer link deep-linking is already implemented)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}